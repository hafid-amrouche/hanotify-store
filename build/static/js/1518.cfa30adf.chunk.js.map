{"version":3,"file":"static/js/1518.cfa30adf.chunk.js","mappings":"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","sources":["pages/LandingPage.jsx","webpack://hanotify-store/./src/css/suneditor-contents.css?3fc9"],"sourcesContent":["import React, { lazy, useEffect, useState } from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport {apiUrl, filesUrl} from '../constants/Urls'\r\nimport states from '../json/states.json'\r\nimport BuySection from './product-page/BuySection'\r\nimport BuyButton from '../components/BuyButton'\r\nimport { adjustScrollPosition, translaste } from '../utils/utils'\r\nimport '../css/suneditor-contents.css'\r\nimport VarinatsSection from './product-page/VarinatsSection'\r\nimport useFBViewPageEvent from '../hooks/useFBViewPageEvent'\r\nimport useIncrementProductViewCount from './product-page/hooks/useIncrementProductViewCount'\r\nimport { useStoreContext } from '../store/store-context'\r\n\r\n\r\nconst defaultProductData = {\r\n    productId: null,\r\n    title: '',\r\n    slug: '',\r\n    miniDescription: '',\r\n    galleryImages: [],\r\n    selectedCategories: [],\r\n    price: 0,\r\n    originalPrice: 0,\r\n    discount: '',\r\n    shippingCostByState: [] ,\r\n    variants: {},\r\n    pricesAndImagesList: [],\r\n    combinationIndex: 0,\r\n    richText: '',\r\n    relatedProducts: [],\r\n    allProductsRelated: false,\r\n  }\r\n\r\nconst LandingPage = () => {\r\n    const [productData, setProductData] = useState(defaultProductData)\r\n    const [error, setError] = useState(false)\r\n    const {id: productId} = useParams()\r\n    const {storeData, language} = useStoreContext()\r\n\r\n    const lang_prefix = language === 'ar' ? '_ar': '' \r\n\r\n    useEffect(()=>{\r\n        const fetchProduct=async()=>{\r\n          setError(false)\r\n          try{\r\n           \r\n            const response = await fetch(\r\n              filesUrl + `/get-product?product_id=${productId}`,\r\n              {\r\n                method: 'get'\r\n              }\r\n            )\r\n            if (!response.ok) {\r\n              console.log(`Error: ${response.status} ${response.statusText}`);\r\n              setError(true)\r\n              return;\r\n            }\r\n            const data = await response.json()              \r\n\r\n            let shippingCostByState = data.useDefaultShipping ? storeData.defaultShippigCosts : data.shippingCostByState\r\n            shippingCostByState = shippingCostByState.map(cost=>{\r\n              const state = states.find(state=>state.id === cost.id)\r\n              return({\r\n                  ...cost,\r\n                  cost: cost.cost,\r\n                  costToHome: cost.costToHome,\r\n                  label: `${state.code} - ${state['name' + lang_prefix]}`,\r\n              })\r\n            })\r\n            setProductData(productData=>({\r\n                ...productData,\r\n                ...data,\r\n                shippingCostByState: shippingCostByState,\r\n            }))\r\n            document.title = data.title || 'Hanotify'\r\n            document.querySelector('#meta-title').setAttribute('content', data.title || 'Hanotify')\r\n\r\n            document.querySelector('#meta-image').setAttribute('content', document.querySelector('#meta-image').getAttribute('content') || (data.galleryImages ? data.galleryImages[0] : ''))\r\n\r\n            document.querySelector('#description').setAttribute('content',  data.miniDescription || document.querySelector('#description').getAttribute('content'))\r\n            document.querySelector('#meta-descrition').setAttribute('content', data.miniDescription  || document.querySelector('#meta-descrition').getAttribute('content'))\r\n          }\r\n          catch(error){\r\n            console.log(error)\r\n          }              \r\n        }\r\n        fetchProduct()\r\n    }, [])\r\n\r\n  useIncrementProductViewCount(productId)\r\n  useFBViewPageEvent()\r\n  const [order, setOrder] = useState(null)\r\n  return (\r\n      <div style={{position:'relative'}}>\r\n        { productData.productId && \r\n          <>\r\n            { productData.richText  && <div className='sun-editor-editable' style={{margin: '0 auto', minHeight: '100vh', maxWidth: '40rem'}} dangerouslySetInnerHTML={{ __html: productData.richText}} />}\r\n            <div className='p-2' id='buy-section' style={{position: 'absolute', zIndex: 2, backgroundColor: 'var(--backgroundColor)', width: '100%', paddingBottom: 'calc(40vh - 186px)'}}>\r\n                <div style={{maxWidth: 600, margin: 'auto'}} className={'p-2' + (productData.pricesAndImagesList.length > 0 ? ' border': '')}>\r\n                  {  productData.pricesAndImagesList.length > 0 && <div className='mb-2'>\r\n                    <VarinatsSection {...{productData, setProductData}} />\r\n                  </div> }\r\n\r\n                  <BuySection productData={productData} setOrder={setOrder} />\r\n                </div>\r\n            </div>\r\n            <div className='d-flex justify-content-center' style={{position: 'fixed', bottom: 0, width: '100%', left: 0, marginBottom: '2vw'}} >\r\n                <BuyButton onClick={()=>adjustScrollPosition(document.querySelector('#buy-section'))} className='gap-2 jiggle' style={{width: '90%', maxWidth: 400}}>\r\n                    <i className=\"fa-solid fa-cart-shopping\" />\r\n                    { translaste('Order now') }\r\n                </BuyButton>\r\n            </div>\r\n          </>\r\n        }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LandingPage","// extracted by mini-css-extract-plugin\nexport default {};"],"names":["defaultProductData","productId","title","slug","miniDescription","galleryImages","selectedCategories","price","originalPrice","discount","shippingCostByState","variants","pricesAndImagesList","combinationIndex","richText","relatedProducts","allProductsRelated","LandingPage","productData","setProductData","useState","error","setError","id","useParams","storeData","language","useStoreContext","lang_prefix","useEffect","async","response","fetch","filesUrl","concat","method","ok","console","log","status","statusText","data","json","useDefaultShipping","defaultShippigCosts","map","cost","state","states","find","costToHome","label","code","document","querySelector","setAttribute","getAttribute","fetchProduct","useIncrementProductViewCount","useFBViewPageEvent","order","setOrder","_jsx","style","position","children","_jsxs","_Fragment","className","margin","minHeight","maxWidth","dangerouslySetInnerHTML","__html","zIndex","backgroundColor","width","paddingBottom","length","VarinatsSection","BuySection","bottom","left","marginBottom","BuyButton","onClick","adjustScrollPosition","translaste"],"sourceRoot":""}